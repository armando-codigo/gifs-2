"use strict";(self.webpackChunkgifs_app=self.webpackChunkgifs_app||[]).push([[928],{2928:(rt,m,o)=>{o.r(m),o.d(m,{GifsModule:()=>it});var c=o(6814),u=o(1352),e=o(4946);let v=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[c.ez,u.Bz]}),s})();var h=o(9862),T=o(7398),C=o(9397),G=o(7394);class L extends G.w0{constructor(i,t){super()}schedule(i,t=0){return this}}const g={setInterval(s,i,...t){const{delegate:n}=g;return n?.setInterval?n.setInterval(s,i,...t):setInterval(s,i,...t)},clearInterval(s){const{delegate:i}=g;return(i?.clearInterval||clearInterval)(s)},delegate:void 0};var x=o(9039);const p={now:()=>(p.delegate||Date).now(),delegate:void 0};class l{constructor(i,t=l.now){this.schedulerActionCtor=i,this.now=t}schedule(i,t=0,n){return new this.schedulerActionCtor(this,i).schedule(n,t)}}l.now=p.now;const d=new class A extends l{constructor(i,t=l.now){super(i,t),this.actions=[],this._active=!1}flush(i){const{actions:t}=this;if(this._active)return void t.push(i);let n;this._active=!0;do{if(n=i.execute(i.state,i.delay))break}while(i=t.shift());if(this._active=!1,n){for(;i=t.shift();)i.unsubscribe();throw n}}}(class w extends L{constructor(i,t){super(i,t),this.scheduler=i,this.work=t,this.pending=!1}schedule(i,t=0){var n;if(this.closed)return this;this.state=i;const r=this.id,a=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(a,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(a,this.id,t),this}requestAsyncId(i,t,n=0){return g.setInterval(i.flush.bind(i,this),n)}recycleAsyncId(i,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&g.clearInterval(t)}execute(i,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(i,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,t){let r,n=!1;try{this.work(i)}catch(a){n=!0,r=a||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:i,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,x.P)(n,this),null!=i&&(this.id=this.recycleAsyncId(t,i,null)),this.delay=null,super.unsubscribe()}}}),_=d;var Z=o(5211),f=o(8180),E=o(9360),k=o(8251),b=o(2420),U=o(975),F=o(1631),B=o(4829);function S(s,i){return i?t=>(0,Z.z)(i.pipe((0,f.q)(1),function J(){return(0,E.e)((s,i)=>{s.subscribe((0,k.x)(i,b.Z))})}()),t.pipe(S(s))):(0,F.z)((t,n)=>(0,B.Xf)(s(t,n)).pipe((0,f.q)(1),(0,U.h)(t)))}var N=o(5592),z=o(671);let y=(()=>{class s{constructor(t){this.http=t,this.apiUrl="https://api.giphy.com/v1/gifs",this.apiEndpoint="search",this.apiKey="Q3saNpHHGG53jmwlwTLDgsp77uJGtGMP",this.apiLimit=10,this.termStack=[],localStorage.getItem("stack")&&(this.termStack=JSON.parse(localStorage.getItem("stack")))}getGifsRequest(t){const n=`${this.apiUrl}/${this.apiEndpoint}`;this.setSessionStorage(t),this.setTermStack(t);let r=this.clearTerm(t);const a=(new h.LE).set("api_key",this.apiKey).set("q",r).set("limit",this.apiLimit);return this.getObservable(n,a)}getObservable(t,n){return this.http.get(t,{params:n}).pipe((0,T.U)(r=>r.data),(0,C.b)(r=>{this.setLocalStorage(r)}),function P(s,i=d){const t=function Q(s=0,i,t=_){let n=-1;return null!=i&&((0,z.K)(i)?t=i:n=i),new N.y(r=>{let a=function M(s){return s instanceof Date&&!isNaN(s)}(s)?+s-t.now():s;a<0&&(a=0);let nt=0;return t.schedule(function(){r.closed||(r.next(nt++),0<=n?this.schedule(void 0,n):r.complete())},a)})}(s,i);return S(()=>t)}(400))}clearTerm(t){const n=RegExp(". ,-/()!?\xa1\xbf\xb4");return t.toLowerCase().replace(n,"")}setLocalStorage(t){localStorage.setItem("gifs",JSON.stringify(t)),localStorage.setItem("stack",JSON.stringify(this.termStack))}setSessionStorage(t){sessionStorage.setItem("term",t)}getLocalStorage(){return localStorage.getItem("gifs")?JSON.parse(localStorage.getItem("gifs")):[]}getSessionStorage(){return sessionStorage.getItem("term")?sessionStorage.getItem("term"):""}setTermStack(t){if(0==this.termStack.length)this.termStack.push(t);else if(this.termStack.includes(t)){const n=[...this.termStack].splice(0,this.apiLimit-1).filter(r=>r!=t);this.termStack=[t,...n]}else{const n=[...this.termStack].splice(0,this.apiLimit-1);this.termStack=[t,...n]}}get getTermStack(){return this.termStack}clearStorage(){localStorage.removeItem("stack"),localStorage.removeItem("gifs"),sessionStorage.removeItem("term"),this.termStack=[]}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(h.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const O=["tag"];let H=(()=>{class s{constructor(){this.tagEmitter=new e.vpe}set setTerm(t){t&&(this.term=t)}get getTerm(){return this.term?this.term:""}sendTag(t){this.tagEmitter.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["shared-tags"]],viewQuery:function(t,n){if(1&t&&e.Gf(O,5),2&t){let r;e.iGM(r=e.CRH())&&(n.tagElement=r.first)}},inputs:{setTerm:"setTerm"},outputs:{tagEmitter:"tagEmitter"},decls:3,vars:1,consts:[["type","button",1,"btn","btn-secondary",3,"click"],["tag",""]],template:function(t,n){1&t&&(e.TgZ(0,"button",0,1),e.NdJ("click",function(){return n.sendTag(n.getTerm)}),e._uU(2),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",n.getTerm,"\n"))},encapsulation:2}),s})();const R=["searchBox"];function D(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"shared-tags",7),e.NdJ("tagEmitter",function(r){e.CHM(t);const a=e.oxw(2);return e.KtG(a.tagGetter(r))}),e.qZA()}2&s&&e.Q6J("setTerm",i.$implicit)}function X(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"section",4),e.YNc(1,D,1,1,"shared-tags",5),e.TgZ(2,"button",6),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.clearHistory())}),e._uU(3," Remove Search History "),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.getTermStack)}}let Y=(()=>{class s{constructor(t){this.getGifsService=t,this.inputEmitter=new e.vpe,this.inputValue=t.getSessionStorage()}inputEmitterFunc(){this.inputEmitter.emit(this.searchBoxInput?.nativeElement.value),this.searchBoxInput.nativeElement.value=""}get getTermStack(){return this.getGifsService.getTermStack}tagGetter(t){this.inputEmitter.emit(t)}clearHistory(){this.getGifsService.clearStorage()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(y))},s.\u0275cmp=e.Xpm({type:s,selectors:[["shared-search-box"]],viewQuery:function(t,n){if(1&t&&e.Gf(R,5),2&t){let r;e.iGM(r=e.CRH())&&(n.searchBoxInput=r.first)}},outputs:{inputEmitter:"inputEmitter"},decls:5,vars:2,consts:[["type","text","name","search-box","id","search-box",1,"m-2",3,"value","keyup.enter"],["searchBox",""],["type","button",1,"m-2","btn","btn-primary",3,"click"],["class","w-100",4,"ngIf"],[1,"w-100"],[3,"setTerm","tagEmitter",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-warning",3,"click"],[3,"setTerm","tagEmitter"]],template:function(t,n){1&t&&(e.TgZ(0,"input",0,1),e.NdJ("keyup.enter",function(){return n.inputEmitterFunc()}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.inputEmitterFunc()}),e._uU(3," Search\n"),e.qZA(),e.YNc(4,X,4,1,"section",3)),2&t&&(e.Q6J("value",n.inputValue),e.xp6(4),e.Q6J("ngIf",n.getTermStack.length>0))},dependencies:[c.sg,c.O5,H],encapsulation:2}),s})(),K=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["shared-loader"]],decls:3,vars:0,consts:[[1,"loader"],["src","assets/three-dots.svg","alt","Loading...","title","Loading...","width","40"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1," Loading... "),e._UZ(2,"img",1),e.qZA())},styles:[".loader[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;padding:12px;background-color:#eee;border-radius:8px;font-size:1.2rem}"]}),s})();const I=function(s){return{display:s}};let V=(()=>{class s{constructor(){this.imgIsLoaded=!1,this.imgWidth=400}set setImgUrl(t){t&&(this.imgUrl=t)}set setImgTitle(t){t&&(this.imgTitle=t)}set setImgAlt(t){t&&(this.imgAlt=t)}get getImgUrl(){return this.imgUrl}get getImgTitle(){return this.imgTitle}get getImgAlt(){return this.imgAlt}get getImgWidth(){return this.imgWidth}get getImgLoadedStatus(){return this.imgIsLoaded}setImgLoadedStatus(){this.imgIsLoaded=!this.imgIsLoaded}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["shared-lazy-img"]],inputs:{setImgUrl:"setImgUrl",setImgTitle:"setImgTitle",setImgAlt:"setImgAlt"},decls:2,vars:11,consts:[[3,"src","alt","title","ngStyle","load"],["src","assets/three-dots.svg","alt","Loading...","title","Loading...","width","50",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"img",0),e.NdJ("load",function(){return n.setImgLoadedStatus()}),e.qZA(),e._UZ(1,"img",1)),2&t&&(e.Udp("width",n.getImgWidth,"px"),e.Q6J("src",n.getImgUrl,e.LSH)("alt",n.getImgAlt)("title",n.getImgTitle)("ngStyle",e.VKq(7,I,n.imgIsLoaded?"inline":"none")),e.xp6(1),e.Q6J("ngStyle",e.VKq(9,I,n.imgIsLoaded?"none":"inline")))},dependencies:[c.PC],encapsulation:2}),s})(),j=(()=>{class s{set setGifData(t){t&&(this.gif=t)}get getGif(){return this.gif}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["gifs-list-item"]],inputs:{setGifData:"setGifData"},decls:5,vars:6,consts:[[1,"card","shadow-sm","p-2","mt-2"],[3,"setImgUrl","setImgAlt","setImgTitle"]],template:function(t,n){1&t&&(e.TgZ(0,"article",0),e._UZ(1,"shared-lazy-img",1),e.TgZ(2,"h3"),e._uU(3),e.ALo(4,"titlecase"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("setImgUrl",n.getGif.images.downsized_medium.url)("setImgAlt",n.getGif.title)("setImgTitle",n.getGif.slug),e.xp6(2),e.Oqu(e.lcZ(4,4,n.getGif.title)))},dependencies:[V,c.rS],encapsulation:2}),s})();function W(s,i){1&s&&e._UZ(0,"gifs-list-item",2),2&s&&e.Q6J("setGifData",i.$implicit)}let $=(()=>{class s{set setGifs(t){0!=t.length&&(console.log(t),this.gifs=t)}get getGifs(){return this.gifs}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["gifs-list"]],inputs:{setGifs:"setGifs"},decls:2,vars:1,consts:[[1,"container","p-2"],[3,"setGifData",4,"ngFor","ngForOf"],[3,"setGifData"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0),e.YNc(1,W,1,1,"gifs-list-item",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.getGifs))},dependencies:[c.sg,j],encapsulation:2}),s})();function q(s,i){if(1&s&&e._UZ(0,"gifs-list",3),2&s){const t=e.oxw();e.Q6J("setGifs",t.getGifs)}}function tt(s,i){1&s&&e._UZ(0,"shared-loader")}const et=[{path:"",component:(()=>{class s{constructor(t){this.getGifsService=t,this.showLoader=!1,this.gifs=this.getGifsService.getLocalStorage()}inputGetter(t){this.showLoader=!0,this.getGifsService.getGifsRequest(t).subscribe(n=>{this.gifs=n,this.showLoader=!1})}get getGifs(){return this.gifs}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(y))},s.\u0275cmp=e.Xpm({type:s,selectors:[["gifs-search-page"]],decls:5,vars:2,consts:[[3,"inputEmitter"],[3,"setGifs",4,"ngIf"],[4,"ngIf"],[3,"setGifs"]],template:function(t,n){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Pagina de busqueda"),e.qZA(),e.TgZ(2,"shared-search-box",0),e.NdJ("inputEmitter",function(a){return n.inputGetter(a)}),e.qZA(),e.YNc(3,q,1,1,"gifs-list",1),e.YNc(4,tt,1,0,"shared-loader",2)),2&t&&(e.xp6(3),e.Q6J("ngIf",n.getGifs),e.xp6(1),e.Q6J("ngIf",n.showLoader))},dependencies:[c.O5,Y,K,$],encapsulation:2}),s})()}];let st=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[u.Bz.forChild(et),u.Bz]}),s})(),it=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[c.ez,st,v]}),s})()}}]);